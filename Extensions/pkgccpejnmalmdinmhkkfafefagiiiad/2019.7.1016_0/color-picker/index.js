let TRstaticjsmsg_type=function(e){return"object"==typeof e&&(e.exports={STABLE_EXTENSION_ID:"pkgccpejnmalmdinmhkkfafefagiiiad",DOWNLOAD_FROM_GITHUB:"https://github.com/zxlie/FeHelper/tree/master/apps/static/screenshot/crx",CODE_STANDARDS:"code_standards",FCP_HELPER_INIT:"fcp_helper_init",FCP_HELPER_DETECT:"fcp_helper_detect",GET_CSS:"get-css",GET_JS:"get-js",GET_HTML:"get-html",GET_COOKIE:"get-cookie",REMOVE_COOKIE:"remove-cookie",SET_COOKIE:"set-cookie",CSS_READY:"css-ready",JS_READY:"js-ready",HTML_READY:"html-ready",ALL_READY:"all-ready",GET_OPTIONS:"get_options",SET_OPTIONS:"set_options",MENU_SAVED:"menu_saved",START_OPTION:"start-option",OPT_START_FCP:"opt-item-fcp",CALC_PAGE_LOAD_TIME:"calc-page-load-time",GET_PAGE_WPO_INFO:"get_page_wpo_info",SHOW_PAGE_LOAD_TIME:"wpo",TAB_CREATED_OR_UPDATED:"tab_created_or_updated",REGEXP_TOOL:"regexp",EN_DECODE:"en-decode",JSON_FORMAT:"json-format",QR_CODE:"qr-code",CODE_BEAUTIFY:"code-beautify",JS_CSS_PAGE_BEAUTIFY:"JS_CSS_PAGE_BEAUTIFY",JS_CSS_PAGE_BEAUTIFY_REQUEST:"JS_CSS_PAGE_BEAUTIFY_REQUEST",CODE_COMPRESS:"code-compress",TIME_STAMP:"timestamp",IMAGE_BASE64:"image-base64",RANDOM_PASSWORD:"password",QR_DECODE:"qr-decode",JSON_COMPARE:"json-diff",JSON_PAGE_FORMAT:"JSON_PAGE_FORMAT",JSON_PAGE_FORMAT_REQUEST:"JSON_PAGE_FORMAT_REQUEST",COLOR_PICKER:"color-picker:newImage",SHOW_COLOR_PICKER:"show_color_picker",AJAX_DEBUGGER:"ajax-debugger",AJAX_DEBUGGER_CONSOLE:"ajax-debugger-console",AJAX_DEBUGGER_SWITCH:"ajax-debugger-switch",HTML_TO_MARKDOWN:"html2markdown",PAGE_CAPTURE:"page-capture",PAGE_CAPTURE_SCROLL:"page_capture_scroll",PAGE_CAPTURE_CAPTURE:"page_capture_capture",STICKY_NOTES:"sticky-notes",DEV_TOOLS:"dev-tools",OPEN_OPTIONS_PAGE:"open-options-page",GRID_RULER:"grid-ruler",MULTI_TOOLKIT:"toolkit",PAGE_MODIFIER:"page-modifier",GET_PAGE_MODIFIER_CONFIG:"get_page_modifier_config",SAVE_PAGE_MODIFIER_CONFIG:"save_page_modifier_config",PAGE_MODIFIER_KEY:"PAGE-MODIFIER-LOCAL-STORAGE-KEY",REMOVE_PERSON_IMG_BG:"remove-person-img-bg",REMOVE_BG:"remove-bg"}),e.exports}({exports:{}}),FeHelper=window.FeHelper||{};FeHelper.elemTool={elm:function(e,t,r,o){var i,n,l=document.createElement(e);if(t&&(t.event||t.events)){var a=t.event||t.events;if("string"==typeof a[0])l.addEventListener(a[0],a[1],a[2]);else if(a.length)for(i=0,n=a.length;i<n;i++)l.addEventListener(a[i][0],a[i][1],a[i][2])}for(i in t)"event"==i.substring(0,5)||("checked"==i||"selected"==i?t[i]&&l.setAttribute(i,i):l.setAttribute(i,t[i]));if(r)for(i=0,n=r.length;i<n;i++)r[i]&&l.appendChild(r[i]);return o&&this.insertNode(l,o),l},txt:function(e){return document.createTextNode(e)},ent:function(e){return document.createTextNode(this.unescapeHtml(e))},paragraphs:function(e){for(var t=e.split("\n"),r=[],o=0,i=t.length;o<i;o++)r.push(elemTool.elm("p",{},[elemTool.ent(t[o])]));return r},insertNode:function(e,t,r){t||(t=document.body),r&&r.parentNode==t?t.insertBefore(e,r):t.appendChild(e)},insertNodes:function(e,t,r){if("array"!=typeof e)this.insertNode(e,t,r);else for(var o=0,i=e.length;o<i;o++)this.insertNode(e[o],t,r,!0)},empty:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},unescapeHtml:function(e){if(e.length<1)return e;var t=document.createElement("div");e=e.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gim,""),t.innerHTML=e;var r=t.childNodes[0].nodeValue;return this.empty(t),r}},FeHelper.ColorPicker=function(){if(document.documentElement instanceof HTMLElement){var e,t="fehelper-colorpicker-box",r="fehelper-colorpicker-result",o=!1,i=!1,n="F00BAF",l="",a=null,c=0,d=0,s=!1,p=!1,m=!1,u="1px solid #666",h="",E=0,A=0,g=document.createElement("canvas"),f=g.getContext("2d"),_=1,v=1,R=!1,T=0,O=0,I=150;return{handler:function(t,r,o){var c={result:!0};t.enableColorPicker?(w(),c.wasAlreadyEnabled=N(),t.workerHasChanged&&(lsnaptabid=-1),c.wasAlreadyEnabled&&(c.hex=n,c.lhex=l,c.previewURI=e,c.FeHelper.elemTool=a.r,c.cg=a.g,c.cb=a.b)):t.doPick?P():t.setPickerImage&&(i.src=t.pickerImage),c.isPicking=!p,o(c)}}}function C(e){return document.getElementById(e)}function y(e,t,r){return o=x(e)+x(t)+x(r),m?o.toLowerCase():o;var o}function x(e){return null==e?"00":0==(e=parseInt(e))||isNaN(e)?"00":(e=Math.max(0,e),e=Math.min(e,255),e=Math.round(e),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16))}function S(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function b(){i.style.height="auto",i.style.width=innerWidth+"px",_=i.naturalWidth/innerWidth,v=i.naturalHeight/innerHeight,g.width=i.naturalWidth,g.height=i.naturalHeight,f.drawImage(i,0,0),setTimeout(function(){R=!1,i.style.visibility="visible",o.style.visibility="visible",document.body.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAA8ElEQVRYCe1WAQ6DIAwsm//e9rP9jOU2z0CpyWhlcQkkpoCld15rVcQ5cs5ZRLZrXbuiXVynDj40SVDQkBKfshChZdBe6yaRUkolmF6X934xxxsSGm4lQqjq8CRBQa6cBCwK9Bk4LzMdVO8USizW129k47HwFtX43i0YjiOIkIDGRGV/2/EezKGydxHBZY2btWntbT8mIMRhOe7s7RFo3IvYFSZqonEekQqAIO5KpMJETVRfw+rugIWFd4pXdJI4MtttZXdGn+mgYP+vBBoPnoaWT9Zr3UpoYL3uIeImARA2W9oe4NI3RKIMFJlPElTvBRTxXFcOwvQSAAAAAElFTkSuQmCC) 16 16,crosshair",Q()},255)}function k(e){e.target.select()}function M(){S(o),FeHelper.elemTool.elm("div",{},[FeHelper.elemTool.elm("input",{type:"text",size:7,style:"width:80px;height:20px;line-height:20px;font-size:10pt;border:"+u,id:"fehelper-colorpicker-cphexvl",value:"#"+n,event:["mouseover",k]}),FeHelper.elemTool.elm("img",{style:"width:20px;height:20px;position:absolute;top:-10px;right:-10px;cursor:pointer;",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAACwklEQVQ4Ea1US0tbQRg9kwmp8YXBi7hKyMZAcaFuFN26daFEUg1BEF24FQr9D/0BIqhbDe0/0I0LceNCQSIVIcZdLkrER2LUm6+caeZiEmkp7cDlMnfOOfM9zneB/7zUn/REJAEgXsfllVI/fscJvncoIhrAZwArrutGb25uoJRCb28vROQKwBqAr0opr5nfEqGIpGq12s7h4SH29vZQKpUMR2uN9vZ29PX1YWJiAsPDw7zkk1Iq+1a0QVBEkuVy+dvW1hYuLi58HKMLBoPo6uoyb+6j0ShmZmYQDodnlVLfLdgXFJGQ53nVjY0NnJ+fo1arMT2Do0BbWxs6OjoQCASMqOd5iMViSKVS0Fp/UEo9ExywygBWj4+PUSwWTWpDQ0MYHx/3jylE4cHBQSwuLiIUCqFQKODk5ISYVQt8K7jCujE1RtPf349kMomRkRGLRSKRwNTUlMng+dkEBHLYPAsyXRaRj9fX19H7+3sTBQ+Pjo5Miul0Gg8PD+aS6elp831/f9/ycXd3B3KpoZTKWdvEb29vfRBT4yKR0S4vL5uLTk9Psbu7619qCeQ6jkOv5t6mbM/Nm6J8WFfWj4sXsFG2WQ2E+sYK5nt6elrOHcfB/Py8sdDl5SUWFhZokxbROjdPASPI3B3Hueru7vZFCZqbm2N9sL29jc3NTVMv1pQdtpHSm+RSwxesq6yNjY35grQMm5TNZvHy8oKnpyesr6/Tc6bz3L++vmJ0dJQcjqJZLcamAP1F+7B2lUoFj4+PRpBRdXZ2mm9kDwwMYGlp6X1j0+la61lag2PF26vVqpkYToVdtBD38XgcmUyGYhy9X6YE4EdoCfw5eJ63wwk4ODiA67ool8tGhJhIJILJyUmwPFrrlp+D1Wl4c65F5IuIFFzXlbOzM8nlclIsFoXf6mehBlJ90xJhM+hvf7DN/H/e/wRZ4k9klRmUggAAAABJRU5ErkJggg==",alt:"Close",title:"[esc]键可直接关闭",id:"fehelper-colorpicker-exitbtn",event:["click",F,!0]})],o),C("fehelper-colorpicker-cphexvl")&&C("fehelper-colorpicker-cphexvl").select(),H()}function P(){p?(l=n,p=!1,S(o)):(p=!0,M())}function F(){var e=setTimeout(w,500);chrome.runtime.sendMessage({disableColorPicker:!0},function(t){clearTimeout(e)})}function w(){s=!1,p=!1,document.removeEventListener("mousemove",B),removeEventListener("scroll",L),removeEventListener("resize",L),removeEventListener("keyup",G),D(),clearTimeout(T)}function D(){document.body&&(i=C(t),o=C(r),i&&document.body.removeChild(i),o&&document.body.removeChild(o),i=!1,o=!1,document.body.style.cursor="")}function G(e){s&&(27==e.keyCode?F():82==e.keyCode||74==e.keyCode?L():13==e.keyCode&&P())}function B(e){s&&(p||(E=e.pageX-pageXOffset,A=e.pageY-pageYOffset,c=Math.round(E*_),d=Math.round(A*v),Q()))}function L(e){s&&(o.style.visibility="hidden",i.style.visibility="hidden",clearTimeout(T),T=setTimeout(function(){Y()},250))}function N(){return o?U():(D(),i=FeHelper.elemTool.elm("img",{id:t,src:h,style:"position:fixed;max-width:none!important;max-height:none!important;top:0px;left:0px;margin:0px;padding:0px;overflow:hidden;z-index:2147483646;",events:[["click",P,!0],["load",b]]},[],document.body),o=FeHelper.elemTool.elm("div",{id:r,style:"position:fixed;min-width:30px;max-width:300px;box-shadow:2px 2px 2px #666;border:"+u+";border-radius:5px;z-index:2147483646;cursor:default;padding:10px;text-align:center;"},[],document.body),document.addEventListener("mousemove",B),addEventListener("keyup",G),addEventListener("scroll",L),addEventListener("resize",L),W(),U(),!1)}function U(){return!!s||(o.style.visibility="hidden",i.style.visibility="hidden",p&&P(),document.body.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAA8ElEQVRYCe1WAQ6DIAwsm//e9rP9jOU2z0CpyWhlcQkkpoCld15rVcQ5cs5ZRLZrXbuiXVynDj40SVDQkBKfshChZdBe6yaRUkolmF6X934xxxsSGm4lQqjq8CRBQa6cBCwK9Bk4LzMdVO8USizW129k47HwFtX43i0YjiOIkIDGRGV/2/EezKGydxHBZY2btWntbT8mIMRhOe7s7RFo3IvYFSZqonEekQqAIO5KpMJETVRfw+rugIWFd4pXdJI4MtttZXdGn+mgYP+vBBoPnoaWT9Zr3UpoYL3uIeImARA2W9oe4NI3RKIMFJlPElTvBRTxXFcOwvQSAAAAAElFTkSuQmCC) 16 16,crosshair",s=!0,setTimeout(Y,1),!1)}function H(){o&&(o.style.top=A+8+"px",o.style.left=E+8+"px",o.clientWidth+o.offsetLeft+24>innerWidth&&(o.style.left=E-8-o.clientWidth+"px"),o.clientHeight+o.offsetTop+24>innerHeight&&(o.style.top=A-8-o.clientHeight+"px"))}function Q(t){if(s){H();var r,i=f.getImageData(c,d,1,1).data;(function(e,t,r){e/=255,t/=255,r/=255;var o,i,n=Math.max(e,t,r),l=Math.min(e,t,r),a=(n+l)/2;if(n==l)o=i=0;else{var c=n-l;switch(i=a>.5?c/(2-n-l):c/(n+l),n){case e:o=(t-r)/c+(t<r?6:0);break;case t:o=(r-e)/c+2;break;case r:o=(e-t)/c+4}o/=6}return{h:Math.round(360*o),s:Math.round(100*i),v:Math.round(100*a)}})(i[0],i[1],i[2]),a={r:i[0],g:i[1],b:i[2]},r={hex:y(i[0],i[1],i[2])},o&&(n=r.hex?r.hex:n,o.style.backgroundColor="#"+n,p&&M()),function(t){var r=c,i=d;if(R)return void!1;var s=Math.floor(.5*I),m=Math.round(r),h=Math.round(i);if(t){var E=J();E.scale(2,2),E.drawImage(g,.5*s-m,.5*s-h),E.scale(.5,.5),E.fillStyle="rgba(0,0,0,0.3)",E.fillRect(s,0,1,I),E.fillRect(0,s,I,1)}else{var E=J();E.drawImage(g,-m+s,-h+s);for(var A,f,_=15,v=0;v<s;v+=2){if(A=s-v,f=s+v,E.drawImage(O,f,0,A,I,f+1,0,A,I),E.drawImage(O,0,0,A+1,I,-1,0,A+1,I),E.drawImage(O,0,f,I,A,0,f+1,I,A),E.drawImage(O,0,0,I,A+1,0,-1,I,A+1),0==v){var T=E.getImageData(s,s,1,1).data,y=T[0]+T[1]+T[2];E.fillStyle=y>192?"rgba(30,30,30,0.8)":"rgba(225,225,225,0.8)"}else E.fillStyle="rgba(255,255,255,0.4)";for(var x=0;x<_&&!(++v>=s);x++)A=s-v,f=s+v,E.drawImage(O,f,0,A,I,f+1,0,A,I),E.drawImage(O,0,0,A+1,I,-1,0,A+1,I),E.drawImage(O,0,f,I,A,0,f+1,I,A),E.drawImage(O,0,0,I,A+1,0,-1,I,A+1);--_<1&&(_=1),E.fillRect(f+1,0,1,I),E.fillRect(A-1,0,1,I),E.fillRect(0,f+1,I,1),E.fillRect(0,A-1,I,1)}}e=O.toDataURL();var b=devicePixelRatio>1?38:19,M=Math.floor(.5*b),P=document.createElement("canvas");P.width=b,P.height=b,P.getContext("2d").drawImage(O,s-M,s-M,b,b,0,0,b,b);var F={};F[b]=P.toDataURL(),chrome.runtime.sendMessage({browserIconMsg:!0,path:F},function(){}),w=e,D=n,p||(n=D||n,!C("fehelper-colorpicker-cpimprev")||a&&!C("cprgbvl")?(S(o),FeHelper.elemTool.elm("div",{},[FeHelper.elemTool.elm("img",{id:"fehelper-colorpicker-cpimprev",height:150,width:150,src:w,style:"margin:0px;padding:0px;margin:0px;"}),FeHelper.elemTool.elm("br"),FeHelper.elemTool.elm("input",{type:"text",size:7,style:"width:60px;height:20px;line-height:20px;font-size:10pt;border:"+u,id:"fehelper-colorpicker-cphexvl",value:"#"+n,event:["mouseover",k]})],o),H()):(C("fehelper-colorpicker-cpimprev").src=w,C("fehelper-colorpicker-cpimprev").width=150,C("fehelper-colorpicker-cpimprev").height=150,C("fehelper-colorpicker-cphexvl").value=n,o.style.backgroundColor="#"+n)),chrome.runtime.sendMessage({setPreview:!0,previewURI:e,hex:n,lhex:l,elemTool:a.r,cg:a.g,cb:a.b},function(e){}),!1;var w,D}()}}function Y(){if(s){if(R)return clearTimeout(T),void(T=setTimeout(function(){Y()},255));document.body.style.cursor="wait",R=!0,o.style.visibility="hidden",i.style.visibility="hidden",i.src=h;var e=innerWidth,t=innerHeight;i.style.width=e+"px",i.style.height=t+"px",setTimeout(function(){try{var e=TRstaticjsmsg_type;chrome.runtime.sendMessage({type:e.COLOR_PICKER},function(e){})}catch(e){console.log("有错误发生，可提交此反馈到官网！",e)}},255)}}function J(){var e=O.getContext("2d");return e||(W(),O.getContext("2d"))}function W(){(O=document.createElement("canvas")).width=I,O.height=I}}(),module.exports=FeHelper.ColorPicker;